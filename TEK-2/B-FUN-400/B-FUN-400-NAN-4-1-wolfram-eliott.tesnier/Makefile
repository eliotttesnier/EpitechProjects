##
## EPITECH PROJECT, 2025
## B-FUN-400-NAN-4-1-bswolfram-eliott.tesnier
## File description:
## Makefile
##

# Colors
GREEN = \033[1;32m
BLUE = \033[1;34m
RED = \033[1;31m
YELLOW = \033[1;33m
NC = \033[0m

NAME = wolfram

all: build copy

build:
	@echo -e "$(BLUE)á’¥ğŸ”§á’§ Building $(NAME)...$(NC)"
	@stack build
	@echo -e "$(GREEN)á’¥âœ…á’§ Build successful!$(NC)"

copy:
	@echo -e "$(YELLOW)á’¥ğŸ“‹á’§ Copying binary...$(NC)"
	@cp `stack path --local-install-root`/bin/$(NAME) .
	@echo -e "$(GREEN)á’¥âœ…á’§ Binary copied successfully!$(NC)"

clean:
	@echo -e "$(RED)á’¥ğŸ§¹á’§ Cleaning build files...$(NC)"
	@stack clean
	@echo -e "$(GREEN)á’¥âœ…á’§ Clean complete!$(NC)"

fclean: clean
	@echo -e "$(RED)á’¥ğŸ—‘ï¸á’§ Removing $(NAME)...$(NC)"
	@rm -f $(NAME)
	@echo -e "$(GREEN)á’¥âœ…á’§ Full clean complete!$(NC)"

re: fclean all

tests_run:
	@echo -e "$(YELLOW)á’¥ğŸ§ªá’§ Running tests...$(NC)"
	@stack test
	@rm -rf src/Main
	@echo -e "$(GREEN)á’¥âœ…á’§ Tests completed!$(NC)"

functional_tests: all
	@echo -e "$(YELLOW)á’¥ğŸ§ªá’§ Running functional tests...$(NC)"
	@python3 tests/functional/tester.py

.PHONY: all build copy clean fclean re tests_run functional_tests
